<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Radio News</title>
    <meta name="description" content="Stream the latest news from public radio stations across Germany, Denmark, Norway, Sweden, UK, and US">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2c3e50">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Radio News">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📻</text></svg>">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <link rel="stylesheet" href="style.css">
    <script src="config.js"></script>
    
    <!-- Early Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="appTitle">📻 Global Radio News</h1>
            <p id="appDescription">Stream the latest news from public radio stations worldwide</p>
        </header>

        <main>
            <!-- Audio Player -->
            <div class="player-section">
                <div class="now-playing" id="nowPlaying">
                    <div class="station-info">
                        <div class="station-name" id="stationName">Select a station</div>
                        <div class="station-country" id="stationCountry"></div>
                    </div>
                </div>

                <audio id="audioPlayer" controls preload="none">
                    <p>Your browser doesn't support HTML5 audio. Please update your browser.</p>
                </audio>

                <div class="player-controls">
                    <button id="playPauseBtn" class="control-btn" disabled>
                        <span class="play-icon">▶️</span>
                        <span class="pause-icon" style="display: none;">⏸️</span>
                    </button>
                    <button id="stopBtn" class="control-btn" disabled>⏹️</button>
                    <div class="volume-control">
                        <span>🔊</span>
                        <input type="range" id="volumeSlider" min="0" max="100" value="70">
                    </div>
                </div>
            </div>

            <!-- Mode Toggle -->
            <div class="mode-toggle">
                <button id="liveBtn" class="mode-btn active">📡 Live Streams</button>
                <button id="podcastBtn" class="mode-btn">🎧 Latest News</button>
            </div>

            <!-- Station List -->
            <div class="stations-section" id="liveSection">
                <h2>Choose Your Live News Station</h2>
                <div id="stationsContainer">
                    <!-- Stations will be loaded dynamically from config -->
                </div>
            </div>

            <!-- Podcast Section -->
            <div class="podcast-section" id="podcastSection" style="display: none;">
                <h2>Latest News Programs</h2>
                <div class="play-all-container">
                    <button id="playAllPodcastsBtn" class="play-all-btn">🔄 Play All News Podcasts</button>
                    <button id="clearPlayedHistoryBtn" class="clear-history-btn" title="Clear played episode history">🗑️ Clear History</button>
                </div>
                <div id="podcastsContainer">
                    <!-- Podcasts will be loaded dynamically from config -->
                </div>
            </div>

            <!-- Loading Indicator -->
            <div class="loading" id="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Connecting to station...</p>
            </div>

            <!-- Status Messages -->
            <div class="status-message" id="statusMessage"></div>
        </main>

        <footer>
            <p>Listen to live news streams from public radio stations worldwide. All streams are provided by their respective broadcasters.</p>
            <p class="disclaimer">Note: Stream availability may vary. Some stations may have geographic restrictions.</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
